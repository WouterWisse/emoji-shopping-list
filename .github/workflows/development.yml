name: Build & Tests

on:
  push:
    branches:
    - main
  workflow_dispatch:

jobs:
  Develop:
    runs-on: macos-12

    steps:
      - name: Switch to latest Xcode
        uses: maxim-lobanov/setup-xcode@v1
        with:
         xcode-version: latest

      - name: Checkout
        if: success()
        timeout-minutes: 5
        uses: actions/checkout@v1

      - name: Install Dependencies
        if: success()
        run: bundle install
        
      - name: Build and Unit Tests
        if: success()
        run: bundle exec fastlane scan --scheme "EmojiShoppingList" --device "iPhone 13 Pro" --clean
